Version 4
SHEET 1 1020 680
WIRE 272 32 240 32
WIRE 752 48 720 48
WIRE 848 48 832 48
WIRE -256 80 -288 80
WIRE -96 80 -256 80
WIRE 528 96 464 96
WIRE 672 96 608 96
WIRE 272 128 272 112
WIRE 464 128 464 96
WIRE 464 128 272 128
WIRE 272 144 272 128
WIRE -256 160 -256 80
WIRE 336 160 272 128
WIRE 352 160 336 160
WIRE -96 176 -96 160
WIRE 16 176 -96 176
WIRE 224 176 16 176
WIRE -96 192 -96 176
WIRE 560 208 560 192
WIRE 464 224 464 128
WIRE 528 224 464 224
WIRE 16 240 16 176
WIRE 80 240 16 240
WIRE 672 240 672 96
WIRE 672 240 592 240
WIRE 704 240 672 240
WIRE 224 256 224 176
WIRE 528 256 224 256
WIRE -256 272 -256 240
WIRE -96 272 -256 272
WIRE -256 288 -256 272
WIRE 560 304 560 272
WIRE 560 304 528 304
WIRE 672 320 672 240
WIRE 800 320 672 320
FLAG -288 80 Vbatt
FLAG -256 288 0
FLAG 80 240 V-LDR
FLAG 272 224 0
FLAG 528 304 Vbatt
FLAG 560 192 0
FLAG 240 32 Vbatt
FLAG 848 336 0
FLAG 720 48 Vbatt
FLAG 704 240 Vcmp
FLAG 352 160 Vref
SYMBOL res -112 64 R0
SYMATTR InstName LDR1
SYMATTR Value R=100k-80k*sin(time*pi)
SYMBOL voltage -256 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 7.5
SYMBOL res 256 16 R0
SYMATTR InstName R2
SYMATTR Value 46k
SYMBOL res -112 176 R0
SYMATTR InstName R1
SYMATTR Value 40k
SYMBOL res 256 128 R0
SYMATTR InstName R3
SYMATTR Value 29k
SYMATTR SpiceLine tol=1
SYMBOL Comparators\\LT1017 560 240 M180
SYMATTR InstName U1
SYMBOL res 624 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 470k
SYMBOL nmos 800 240 R0
SYMATTR InstName M1
SYMBOL LED 832 48 R0
SYMATTR InstName D1
SYMBOL LED 832 112 R0
SYMATTR InstName D2
SYMBOL LED 832 176 R0
SYMATTR InstName D3
SYMBOL res 736 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 10
TEXT -16 352 Left 2 !.tran 1 startup
TEXT 192 -8 Left 2 ;GROUP 5
TEXT 72 -40 Left 2 ;LDR (Light Dependent Resistor)
